{% extends 'base.html.twig' %}
{% block title %}
Nouvelle sorti | {{ parent() }}
{% endblock %}
{% block javascripts %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
{% endblock %}

{% block body %}
    <h1>Cr√©er une sortie</h1>
    <div>
        {{ form_start(sortieForm) }}
        <div>
            {{ form_row(sortieForm.nom) }}
            {{ form_row(sortieForm.dateHeureDebut) }}
            {{ form_row(sortieForm.dateLimiteInscription) }}
            {{ form_row(sortieForm.nbInscriptionsMax) }}
            {{ form_row(sortieForm.duree) }}
            {{ form_row(sortieForm.infosSortie) }}
        </div>
        <div>
            <label>Campus : </label> {{ app.user.campus.nom }}
            {{ form_row(sortieForm.ville) }}


            {{ form_row(sortieForm.lieu) }}
            <label>Rue :</label> blabla <br>
            <lable>Code Postal : </lable>blabla
            {{ form_row(sortieForm.etat) }}
        </div>


        <button type="submit" class="btn btn-primary">Ajouter</button>
        {{ form_end(sortieForm) }}
    </div>

    <script>const RECHERCHE_LIEU = "{{ path('app_rechercheLieu') }}"</script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        let ville_choix = document.getElementById('sortie_ville')
        console.log(ville_choix)
        ville_choix.addEventListener("change", () => {
            let option = ville_choix.value;
            console.log(option);
            axios.get(RECHERCHE_LIEU, {
                params: {"option": option}
            })
                .then((res) => {
                    console.log(res.data)
                    let selectLieux = document.getElementById("sortie_lieu")
                    selectLieux.innerHTML = res.data;
                })
        })
    </script>
{%  endblock %}